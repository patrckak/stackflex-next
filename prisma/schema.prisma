// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "sqlite"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id                String    @id @unique // CPF
  private_id        String    @unique @default(cuid())
  username          String
  email             String
  type              Int       @default(0) // permissões criticas do sistema
  verification      String?
  isVerificated     Boolean   @default(false) // se o email é verificado ou não
  password          String
  LastModify        DateTime  @updatedAt
  avatar            String    @default("https://utfs.io/f/SHkctA3zZK7UNJJh7RPsirWFqgMZSXO8ta0lynz9TEYoj2Hv")
  enterpriseAccount Boolean   @default(false)
  storeRelation     Store?    @relation(fields: [storeId], references: [id])
  storeId           String?
  Account           Account[]

  @@index([storeId])
}

model Account {
  id          String  @id
  theme       String  @default("sys") // sys = system pref | drk = dark theme | lgt = light theme
  usePDV      Boolean @default(false) // Ponto de Venda
  useStock    Boolean @default(false) // Gestão de estoque
  useFinance  Boolean @default(false) // Gestão Financeira
  useWhatsapp Boolean @default(false) // Integração com Whatsapp
  useChild    Boolean @default(false) // Criação de contas "filhas"

  relation User @relation(fields: [id], references: [private_id])
}

model Store {
  id         String @id @unique
  private_id String @unique @default(cuid())
  name       String
  type       Int
  User       User[]
}
